# This is the base compose file. It defines services that are common
# across all environments or are essential for the project's tooling.
#
# To run this with other services, you can chain files:
# docker-compose -f docker-compose.yml -f docker-compose.ros.yml up

  
services:
  gazebo:
    build: .
    volumes:
      - ./worlds:/ros_ws/worlds
      - ./bridge:/ros_ws/bridge
    ports:
      - "8765:8765"

  # This service builds the Foxglove extension (.foxe file)
  # It's a "one-shot" service that you run when you need to build the extension.
  # Usage: docker-compose run --rm extension-builder
  extension-builder:
    build:
      context: ./swarm-sense-extension
      dockerfile: Dockerfile
    #user: "${UID}:${GID}" #Might add if needed
    volumes:
      # This mounts the 'dist' folder from the container to your local machine.
      - ./swarm-sense-extension/dist:/app/dist
    command: npm run build