version: '3.8'

# This compose file contains all services related to the ROS environment.
# It can be run alongside the base docker-compose.yml file.

services:
  ros-master:
    image: ros:${ROS_DISTRO:-noetic}-ros-core
    command: stdbuf -o L roscore
    networks:
      - robot-net
    restart: unless-stopped

  robot-1-sim:
    # This assumes you have a Dockerfile in a 'robot_ws' directory
    # build: ./robot_ws
    image: ubuntu:20.04 # Placeholder image
    command: sleep infinity # Placeholder command
    environment:
      - ROS_MASTER_URI=http://ros-master:11311
    networks:
      - robot-net
    depends_on:
      - ros-master

networks:
  robot-net:
    driver: bridge